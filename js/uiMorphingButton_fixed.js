!function(t){"use strict";var n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],e=Modernizr.csstransitions;function i(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e]);return t}function o(t,n){this.el=t,this.options=i({},this.options),i(this.options,n),this._init()}o.prototype.options={closeEl:"",onBeforeOpen:function(){return!1},onAfterOpen:function(){return!1},onBeforeClose:function(){return!1},onAfterClose:function(){return!1}},o.prototype._init=function(){this.button=this.el.querySelector("button"),this.expanded=!1,this.contentEl=this.el.querySelector(".popup_content"),this._initEvents()},o.prototype._initEvents=function(){var t=this;if(this.button.addEventListener("click",function(){t.toggle()}),""!==this.options.closeEl){var n=this.el.querySelector(this.options.closeEl);if(n){n.addEventListener("click",function(){t.toggle()});var e=this.el.querySelector("#submit");e&&e.addEventListener("click",function(){setTimeout(function(){$("#success").is(":visible")&&t.toggle()},5e3)})}}},o.prototype.toggle=function(){if(this.isAnimating)return!1;this.expanded?this.options.onBeforeClose():(classie.addClass(this.el,"active"),this.options.onBeforeOpen()),this.isAnimating=!0;var t=this,i=function(o){if(o.target!==this)return!1;if(e){if(t.expanded&&"opacity"!==o.propertyName||!t.expanded&&"width"!==o.propertyName&&"height"!==o.propertyName&&"left"!==o.propertyName&&"top"!==o.propertyName)return!1;this.removeEventListener(n,i)}t.isAnimating=!1,t.expanded?(classie.removeClass(t.el,"active"),t.options.onAfterClose()):t.options.onAfterOpen(),t.expanded=!t.expanded};e?this.contentEl.addEventListener(n,i):i();var o=this.button.getBoundingClientRect();classie.addClass(this.contentEl,"no-transition"),this.contentEl.style.left="auto",this.contentEl.style.top="auto",setTimeout(function(){t.contentEl.style.left=o.left+"px",t.contentEl.style.top=o.top+"px",t.expanded?(classie.removeClass(t.contentEl,"no-transition"),classie.removeClass(t.el,"open")):setTimeout(function(){classie.removeClass(t.contentEl,"no-transition"),classie.addClass(t.el,"open")},25)},25)},t.UIMorphingButton=o}(window);